<tr>
  <td>
    <% if Settings.status != "gpx_offline" %>
      <% if trace.inserted %>
        <%= link_to image_tag(trace_icon_path(trace.user, trace), :alt => ""), show_trace_path(trace.user, trace) %>
      <% else %>
        <span class="text-danger"><%= t ".pending" %></span>
      <% end %>
    <% end %>
  </td>
  <td>
    <ul class="list-inline mb-0">
      <li class="list-inline-item">
        <%= link_to trace.name, show_trace_path(trace.user, trace) %>
      </li>

      <% if trace.inserted? %>
        <li class="list-inline-item">
          <%= t ".count_points", :count => trace.size %>
        </li>
      <% end %>

      <li class="list-inline-item">
        <% badge_class = case trace.visibility
                         when "public", "identifiable" then "success"
                         else "danger"
                         end %>
        <span class="badge bg-<%= badge_class %> text-white"><%= t(".#{trace.visibility}") %></span>
      </li>
    </ul>
    <p class="text-muted mb-0">
      <%= friendly_date_ago(trace.timestamp) %>
      <%= t ".by" %> <%= link_to trace.user.display_name, trace.user %>
      <% if !trace.tags.empty? %>
        <%= t ".in" %>
        <%= safe_join(trace.tags.collect { |tag| link_to_tag tag.tag }, ", ") %>
      <% end %>
    </p>
    <p class="fst-italic mb-0">
      <%= trace.description %>
    </p>
  </td>
  <td>
    <% if trace.inserted? %>
      <nav class="secondary-actions">
        <ul>
          <li>
            <%= link_to t(".view_map"), root_path(:mlat => trace.latitude, :mlon => trace.longitude, :anchor => "map=14/#{trace.latitude}/#{trace.longitude}") %>
          </li>
          <li>
            <%= link_to t(".edit_map"), edit_path(:gpx => trace.id) %>
          </li>
        </ul>
      </nav>
    <% end %>
  </td>
</tr>
