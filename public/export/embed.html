<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <title>OpenStreetMap Embedded</title>
    <style type="text/css">
        html {
            width: 100%;
            height: 100%;
        }
        body {
            width: 100%;
            height: 100%;
            margin: 0px;
        }
        #map {
            width: 100%;
            height: 100%;
        }
    </style>
    <link href="/assets/leaflet.css" media="screen" rel="stylesheet" type="text/css">
    <!--[if IE]>
    <link href="/assets/leaflet.ie.css" media="screen" rel="stylesheet" type="text/css" />
     <![endif]-->
    <script src="/assets/leaflet.js"></script>
    <script src="/assets/leaflet.osm.js"></script>
  </head>

  <body>
    <div id="map"></div>
    <script>
      var query = (window.location.search || '?').substr(1),
          args  = {};

      query.replace(/([^&=]+)=?([^&]*)(?:&+|$)/g, function(match, key, value) {
        value = value.split(",");
        if (value.length == 1)
          value = value[0];
        args[key] = value;
      });

      var map = L.map("map");
      map.attributionControl.setPrefix('');

      if (!args.layer || args.layer == "mapnik" || args.layer == "osmarender") {
        new L.OSM.Mapnik().addTo(map);
      } else if (args.layer == "cyclemap" || args.layer == "cycle map") {
        new L.OSM.CycleMap().addTo(map);
      } else if (args.layer == "transportmap") {
        new L.OSM.TransportMap().addTo(map);
      } else if (args.layer == "mapquest") {
        new L.OSM.MapQuestOpen().addTo(map);
      }

      if (args.marker) {
        L.marker(args.marker).addTo(map);
      }

      if (args.bbox) {
        map.fitBounds([L.latLng(args.bbox[1], args.bbox[0]),
                       L.latLng(args.bbox[3], args.bbox[2])])
      } else {
        map.fitWorld();
      }
    </script>
  </body>
</html>
